var $jscomp={scope:{}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(f,t,m){if(m.get||m.set)throw new TypeError("ES3 does not support getters and setters.");f!=Array.prototype&&f!=Object.prototype&&(f[t]=m.value)};$jscomp.getGlobal=function(f){return"undefined"!=typeof window&&window===f?f:"undefined"!=typeof global&&null!=global?global:f};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(f,t,m,C){if(t){m=$jscomp.global;f=f.split(".");for(C=0;C<f.length-1;C++){var D=f[C];D in m||(m[D]={});m=m[D]}f=f[f.length-1];C=m[f];t=t(C);t!=C&&null!=t&&$jscomp.defineProperty(m,f,{configurable:!0,writable:!0,value:t})}};$jscomp.SYMBOL_PREFIX="jscomp_symbol_";$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.symbolCounter_=0;
$jscomp.Symbol=function(f){return $jscomp.SYMBOL_PREFIX+(f||"")+$jscomp.symbolCounter_++};$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var f=$jscomp.global.Symbol.iterator;f||(f=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[f]&&$jscomp.defineProperty(Array.prototype,f,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};
$jscomp.arrayIterator=function(f){var t=0;return $jscomp.iteratorPrototype(function(){return t<f.length?{done:!1,value:f[t++]}:{done:!0}})};$jscomp.iteratorPrototype=function(f){$jscomp.initSymbolIterator();f={next:f};f[$jscomp.global.Symbol.iterator]=function(){return this};return f};$jscomp.array=$jscomp.array||{};
$jscomp.iteratorFromArray=function(f,t){$jscomp.initSymbolIterator();f instanceof String&&(f+="");var m=0,C={next:function(){if(m<f.length){var D=m++;return{value:t(D,f[D]),done:!1}}C.next=function(){return{done:!0,value:void 0}};return C.next()}};C[Symbol.iterator]=function(){return C};return C};$jscomp.polyfill("Array.prototype.entries",function(f){return f?f:function(){return $jscomp.iteratorFromArray(this,function(f,m){return[f,m]})}},"es6-impl","es3");
$jscomp.findInternal=function(f,t,m){f instanceof String&&(f=String(f));for(var C=f.length,D=0;D<C;D++){var F=f[D];if(t.call(m,F,D,f))return{i:D,v:F}}return{i:-1,v:void 0}};$jscomp.polyfill("Array.prototype.find",function(f){return f?f:function(f,m){return $jscomp.findInternal(this,f,m).v}},"es6-impl","es3");$jscomp.polyfill("Array.prototype.keys",function(f){return f?f:function(){return $jscomp.iteratorFromArray(this,function(f){return f})}},"es6-impl","es3");
$jscomp.polyfill("Array.prototype.values",function(f){return f?f:function(){return $jscomp.iteratorFromArray(this,function(f,m){return m})}},"es6","es3");$jscomp.checkStringArgs=function(f,t,m){if(null==f)throw new TypeError("The 'this' value for String.prototype."+m+" must not be null or undefined");if(t instanceof RegExp)throw new TypeError("First argument to String.prototype."+m+" must not be a regular expression");return f+""};
$jscomp.polyfill("String.prototype.startsWith",function(f){return f?f:function(f,m){var t=$jscomp.checkStringArgs(this,f,"startsWith");f+="";for(var D=t.length,F=f.length,n=Math.max(0,Math.min(m|0,t.length)),Y=0;Y<F&&n<D;)if(t[n++]!=f[Y++])return!1;return Y>=F}},"es6-impl","es3");
$jscomp.polyfill("String.prototype.endsWith",function(f){return f?f:function(f,m){var t=$jscomp.checkStringArgs(this,f,"endsWith");f+="";void 0===m&&(m=t.length);for(var D=Math.max(0,Math.min(m|0,t.length)),F=f.length;0<F&&0<D;)if(t[--D]!=f[--F])return!1;return 0>=F}},"es6-impl","es3");
var zera=function(){function f(a,b){if(null==a)return!1;if(a instanceof b)return!0;var c=a.$zera$protocols;return null==c?!1:b===c[b.$zera$tag]}function t(){}function m(){}function C(a){this.$zera$meta=a||N()}function D(a){this.$zera$meta=a||N()}function F(){}function n(a,b,c){this.$zera$ns=a;this.$zera$name=b;this.$zera$meta=c||N();this.$zera$protocols={"zera.lang.IObj":m,"zera.lang.IMeta":t,"zera.lang.Named":F}}function Y(){if(1===arguments.length)return new n(null,arguments[0]);if(2===arguments.length)return new n(arguments[0],
arguments[1]);throw Error(h("Wrong number of arguments (",arguments.length,") passed to symbol"));}function L(a){return a instanceof n}function v(a){this.$zera$sym=a;this.$zera$protocols={"zera.lang.Named":F}}function ea(a){return f(a,v)}function Ya(){if(1===arguments.length)return v.intern(new n(null,arguments[0]));if(2===arguments.length)return v.intern(new n(arguments[0],arguments[1]));throw Error(h("Wrong number of arguments expected 1 or 2, got: ",arguments.length));}function W(a){this.$zera$meta=
a}function Ha(a){if(null==a)return q.EMPTY;if(la(a))return a;if(ArrayLike(a))return Ia(a);if(Za(a))return a.seq();throw Error("Not a valid Seq or Seqable");}function la(a){return f(a,W)}function Za(a){return null==a||fa(a)?!0:z(a.seq)}function ua(){}function q(a,b,c){this.$zera$car=b;this.$zera$cdr=c;this.$zera$meta=a;null==b&&null==c?this.$zera$count=0:null==c?(this.$zera$cdr=q.EMPTY,this.$zera$count=1):this.$zera$count=c instanceof q?c.count()+1:1;this.$zera$protocols={"zera.lang.IMeta":t,"zera.lang.Seq":W,
"zera.lang.AMap":ia}}function G(a,b){return new q(null,a,b)}function p(a){if(null==a)return null;if(null!=a&&z(a.rest))return a.first();throw Error(h("Not a valid Cons: ",r(a)));}function l(a){if(null==a)return null;if(null!=a&&z(a.rest))return a.rest();throw Error(h("Not a valid Cons: ",r(a)));}function X(a){return a instanceof q}function I(){if(0===arguments.length)return q.EMPTY;if(1===arguments.length)return G(arguments[0],q.EMPTY);var a,b,c=q.EMPTY;for(a=arguments.length-1;0<=a;a--)b=arguments[a],
c=G(b,c);return c}function Q(a,b){this.fn=null==b?null:b;this._seq=null==a?null:a;this._sv=null}function va(a){return new Q(null,a)}function $a(a,b){if(2!==arguments.length)throw Error(h("Wrong number of arguments expected: 2, got: ",arguments.length));return va(function(){return 0<a?G(ba(b),$a(a-1,ma(b))):null})}function ab(a,b,c){var g,k,x;if(1===arguments.length)g=0,k=a,x=1;else if(2===arguments.length)g=a,k=b,x=1;else if(3===arguments.length)g=a,k=b,x=c;else throw Error(h("Expected between 1 and 3 arguments, got: ",
arguments.length));return va(function(){return g===k?null:G(g,ab(g+x,k,x))})}function ga(a){return X(a)&&!X(l(a))&&null!=l(a)}function R(a){return"[object Array]"===Object.prototype.toString.call(a)}function fa(a){return null!=a&&S(a.length)}function O(a,b){this.$zera$key=a;this.$zera$val=b}function ia(){}function u(a,b){this.$zera$array=b?b:[];this.$zera$meta=a;this.$zera$protocols={"zera.lang.IMeta":t,"zera.lang.Seq":W,"zera.lang.AMap":ia}}function na(a){return a instanceof ia||"[object Map]"===
Object.prototype.toString.call(a)}function N(){return new u(null,Array.prototype.slice.call(arguments))}function bb(a){if(z(a.key))return a.key();throw Error(h("Don't know how to get key from: ",r(a)));}function cb(a){if(z(a.val))return a.val();throw Error(h("Don't know how to get val from: ",r(a)));}function oa(a){this.$zera$meta=a}function M(a,b){this.$zera$rep=b||N();this.$zera$meta=a}function J(a,b){M.call(this,a,b)}function wa(a){return a instanceof oa}function xa(a,b){if(R(a))return a[b];throw Error(h("Don't know how to get the nth element from: ",
r(a)));}function T(a){if(null==a)return 0;if(z(a.count))return a.count();if(null!=a.length)return a.length;throw Error(h("Don't know how to get the count of: ",r(a)));}function Ja(a){var b=Array.prototype.slice.call(arguments,1),c=null==a?q.EMPTY:a,g;if(z(c.conj))return c.conj(b);if(fa(c)){for(g=0;g<b.length;g++)c.push(b[g]);return c}throw Error(h("Don't know how to conj: ",r(c)));}function ba(a){if(null==a)return null;if(z(a.first))return a.first();if(fa(a))return a[0];throw Error(h("Don't know how to get the first element of: ",
r(a)));}function ma(a){if(null==a)return null;if(z(a.rest))return a.rest();if(fa(a))return Array.prototype.slice.call(a,1);throw Error(h("Don't know how to get the rest of the elements of: ",r(a)));}function U(a){if(null==a)return!0;if(z(a.isEmpty))return a.isEmpty();if(z(a.count))return 0===a.count();if(fa(a))return 0===a.length;throw Error(h("Don't know hot to determine if: ",r(a)," is empty"));}function db(a){var b,c,g;if(2===arguments.length)g=arguments[1],c=ba(g),g=ma(g);else if(3===arguments.length)c=
arguments[1],g=arguments[2];else throw Error(h("Expected either 2 or 3 arguments, got: ",arguments.length));for(;!U(g);)b=ba(g),c=ca(a,I(c,b)),g=ma(g);return c}function ya(a,b){if(2===arguments.length)return va(function(){return U(b)?null:G(ca(a,I(ba(b))),ya(a,ma(b)))});throw Error(h("Expected 2 arguments, got: ",arguments.length));}function eb(a,b){if(1===arguments.length)return function(b){return eb(a,b)};if(2===arguments.length)return za(db(function(b,g){var c=ca(a,I(g));return null!=c&&!1!==c?
Ja(b,g):b},null,b));throw Error(h("Expected 1 or 2 arguments, got: ",arguments.length));}function r(a){if(null==a)return"nil";if(S(a))return h(a);if(Ka(a))return a?"true":"false";if(ha(a))return h('"',a,'"');if(null!=a&&void 0!==a.vars)return"env";if(X(a)){if(ga(a))return h("(",r(p(a))," & ",r(l(a)),")");if(U(a))return"()";var b=p(a);a=l(a);for(var c=[];null!=b;)c.push(r(b)),b=p(a),a=l(a);return h("(",c.join(" "),")")}return R(a)?0===a.length?"(array)":h("(array ",a.map(function(a){return r(a)}).join(" "),
")"):z(a)?h('#js/function "',a.toString(),'"'):fa(a)?a.hasOwnProperty("toString")?a.toString():h("#js/object {",Array.prototype.slice.call(a).map(function(a,b){return h(b," ",r(a))}).join(", "),"}"):""+a}function La(a){console.log(r(a))}function Ka(a){return"[object Boolean]"===Object.prototype.toString.call(a)}function ha(a){return"[object String]"===Object.prototype.toString.call(a)}function h(){return Array.prototype.slice.call(arguments).join("")}function Ma(a){var b=Object.prototype.toString.call(a);
if("[object Number]"===b)return a;if("[object String]"===b){b=1*a;if(isNaN(b))throw Error(h("Cannot convert: ",r(a)," to a number"));return b}throw Error(h("Cannot convert: ",r(a)," to a number"));}function Ia(a){if(null==a||0===a.length)return q.EMPTY;if(1===a.length)return G(a[0],q.EMPTY);var b,c=null;for(b=a.length-1;0<=b;b--)c=G(a[b],c);return c}function S(a){return"[object Number]"===Object.prototype.toString.call(a)}function pa(a,b){return null==a?null==b:z(a.equals)?a.equals(b):a===b}function fb(a,
b,c){a===b?c?P(h("passed - ",c)):P("passed"):(c?P(h("failed - ",c)):P("failed"),P("expected: ",a),P("got: ",b))}function gb(a,b){null!=a&&!1!==a?b?P(h("passed - ",b)):P("passed"):b?P(h("failed - ",b)):P("failed")}function H(a,b,c){this.$zera$ns=b;this.$zera$name=c;this.$zera$meta=a||N()}function e(a,b,c){return H.intern(a,n.intern(b),c)}function Na(a){return a instanceof H}function y(a){if(!L(a))throw Error(h("Namespace name should be a symbol, got: ",r(a)));this.$zera$name=a;this.$zera$mappings=
{};this.$zera$aliases={}}function Aa(a){return Oa(a)?a:y.findOrDie(a)}function Oa(a){return a instanceof y}function Ba(a){return a?{vars:{},parent:a}:{vars:{},parent:null}}function Ca(a,b){if(null==a)return null;if(null!=a.vars&&void 0!==a.vars[b])return a;if(null!=a.parent)for(var c=a.parent;null!=c;){if(null!=c.vars&&void 0!==c.vars[b])return c;c=c.parent}return null}function ja(a,b,c){a.vars[b]="undefined"!==typeof c?c:null;return null}function hb(a,b){var c=Error(h("Undefined variable: ",a)),
g,k=a.name();if(a.isQualified()){g=y.findOrDie(a.namespace());g=g.mapping(k);if(!g){if(!b)throw c;return null}return g}if((g=ka.get().mapping(k))||(g=d.mapping(k)))return g;if(b)return null;throw c;}function Cb(a,b){var c=Error(h("Macros cannot be evaluated in this context")),g,k=a.name();if(a.isQualified()){g=y.findOrDie(a.namespace());g=g.mapping(k);if(!g)throw Error(h("Undefined variable: ",a));if(g.isMacro())throw c;return g.get()}g=Ca(b,k);if(null!=g)return g.vars[k];if(g=ka.get().mapping(k)){if(g.isMacro())throw c;
return g.get()}if(g=d.mapping(k)){if(g.isMacro())throw c;return g.get()}throw Error(h("Undefined variable: ",a));}function ib(a,b,c){return!b.isQualified()&&(a=Ca(a,b))?(a.vars[b]=c,a.vars[b]):hb(b).set(c)}function za(a){if(U(a))return q.EMPTY;var b=l(a);a=p(a);for(var c=q.EMPTY;a;)c=G(a,c),a=p(b),b=l(b);return c}function jb(a){if(null==a)return q.EMPTY;if(1==T(a))return a;for(var b=p(a),c=p(l(a)),g=q.EMPTY;b&&c;)g=G(G(b,c),g),a=l(l(a)),b=p(a),c=p(l(a));return g}function kb(a){if(null==a)return u.EMPTY;
var b=Object.getOwnPropertyNames(a);if(0===b.length)return null;var c,g=[];for(c=0;c<b.length;c++)g.push(n.intern(b[c])),g.push(a[b[c]]);return new u(null,g)}function z(a){return"[object Function]"===Object.prototype.toString.call(a)}function Z(a){if(R(a))return a;var b=p(a);a=l(a);for(var c=[];null!=b;)c.push(b),b=p(a),a=l(a);return c}function ca(a,b){if(R(a))return a[p(b)];if(z(a.apply))return a.apply(null,Z(b));var c;ga(a)?(c=ba(ba(a)),c=null!=c&&"fn"===c.toString()):c=!1;if(!c)throw Error(h("Not a valid function: ",
r(a),""));var g=p(a);c=l(a);var g=l(g),k=p(g),g=l(g);if(U(g))return null;var x;a:if(ga(k))x=U(p(k))?-1:-2;else{x=Z(k);var d=x.length,e;for(e=0;e<d;e++)if(ga(x[e])){x=-1*d;break a}x=d}d=T(b);if(0>x&&d<Math.abs(x)-1)throw Error(h("Wrong number of arguments, expected at least: ",Math.abs(x)-1,", got: ",d));if(0<x&&x!==d)throw Error(h("Wrong number of arguments, expected: ",x,", got: ",d));if(ga(k))k=U(p(k))?[[l(k),b]]:[[p(k),p(b)],[l(k),l(b)]];else{x=[];d=Z(k);e=Z(b);for(k=0;k<d.length;k++)ga(d[k])?
(x.push([p(d[k]),e[k]]),x.push([l(d[k]),Ia(e.slice(k+1))])):x.push([d[k],e[k]]);k=x}for(x=0;x<k.length;x++)ja(c,k[x][0],k[x][1]);k=null;x=p(g);for(g=l(g);null!=x;)k=B(x,c),x=p(g),g=l(g);return k}function Db(a,b){var c=B(p(a),b),g=l(a);p(g);l(g);g=I.apply(null,K(function(a){return B(a,b)},g));return ca(c,g)}function lb(a,b){var c=l(a),g=p(c);l(c);if(!qa(g))throw Error(h("function arguments should be a vector, got: ",r(a)));return G(a,Ba(b))}function mb(a,b){var c=l(a),g=p(c),c=l(c),c=lb(G(Eb,c),b);
return H.intern(ka.get(),g,c).setMacro()}function Da(a){if(X(a)&&L(p(a))){var b=p(a),c=b.toString();if(!Fb[c]){if(".-"!=c&&c.startsWith(".-"))return I(".",p(l(a)),n.intern(c.slice(1)));if("."!=c&&c.startsWith("."))return I(Gb,p(l(a)),G(n.intern(c.slice(1)),l(l(a))));if(c.endsWith("."))return G(Hb,G(n.intern(c.replace(/\.$/,"")),l(a)));b=hb(b,!0);if(null==b)return a;if(b.isMacro())return Da(ca(b.get(),l(a)))}}return a}function nb(a){this.args=a}function Ib(a,b){var c=K(function(a){return B(a,b)},l(a));
throw new nb(c);}function Jb(a,b){var c=B(p(l(a)),b);if(!z(c))throw Error("class given is not a valid constructor");var g=K(function(a){return B(a,b)},l(l(a)));return new (c.bind.apply(c,[].concat(c,g)))}function Kb(a,b){var c=B(p(l(a)),b),g=p(l(l(a))),k;if(L(g))return g=g.toString(),k=c[g],g.startsWith("-")?c[g.slice(1)]:z(k)?k.call(c):k;if(X(g)){var d=h(p(g));k=c[d];if(d.startsWith("-"))return c[d.slice(1)];if(z(k))return g=K(function(a){return B(a,b)},l(g)),k.apply(c,g)}throw Error(h('invalid member access: "',
r(a),'"'));}function ob(a,b){return a.map(function(a){return B(a,b)})}function Pa(a,b){for(var c=Ha(a),g=Ha(b);null!=ba(g);)c=Ja(c,ba(g)),g=ma(g);return c}function Lb(a,b){var c=ya(function(a){return[B(a.key(),b),B(a.val(),b)]},a),c=Pa(u.EMPTY,c);return a.meta()?c.withMeta(a.meta()):c}function Mb(a,b){var c=ya(function(a){return B(a,b)},a),c=Pa(J.EMPTY,c);return a.meta()?c.withMeta(a.meta()):c}function B(a,b){for(var c=b||pb,g=!0,k=null,d=Da(a);g;)if(g=!1,null==d||qb.equals(d))k=null;else{var f=k=
d;if(Ka(f)||S(f)||ha(f)||ea(f)||null==f||z(k))k=d;else if(na(d))k=Lb(d,c);else if(qa(d))k=ob(d,c);else if(R(d))k=Nb(d,c);else if(wa(d))k=Mb(d,c);else if(L(d))k=Cb(d,c);else if(X(d)){if(d.isEmpty())return d;switch(h(p(d))){case "quote":k=p(l(d));break;case "do":for(var k=void 0,A=d,f=c,w=p(l(A)),A=l(l(A));null!=w;)k=B(w,f),w=A.first(),A=A.rest();break;case "let":var k=void 0,m,f=c,A=l(d),w=p(A),A=l(A);if(!qa(w)&&0===T(w)%2)throw Error("Bindings should be a vector with an even number of elements");
for(m=0;m<w.length;m+=2)ja(f,xa(w,m)),ja(f,xa(w,m),B(xa(w,m+1),f));w=p(A);for(A=l(A);null!=w;)k=B(w,f),w=A.first(),A=A.rest();break;case "def":f=c;w=l(d);k=p(w);w=p(l(w));A=ka.get();f=H.intern(A,k,B(w,f));k.meta()&&(w=k.meta(),P(h("reset var meta data to:",": ",r(w))),f.resetMeta(k.meta()));k=f;break;case "var":k=p(l(d));if(!L(k))throw Error("Var name should be a Symbol, got: "+r(k));if(!k.namespace())throw Error("Var name should be fully qualified");k=H.intern(n.intern(k.namespace()),n.intern(k.name()));
break;case "set!":k=c;w=l(d);f=p(w);w=p(l(w));if(null==f||null==w)throw Error("Malformed assignment expecting: (set! target value)");k=ib(k,f,B(w,k));break;case "cond":a:{var q,w=d,k=c,f=l(w);if(0!==T(f)%2)throw Error(h("cond requires an even number of predicates: ",r(w)));A=1;for(m=f;A<T(f);){w=l(m);q=p(m);m=p(w);if("else"===q){k=B(m,k);break a}else if(q=B(q,k),null!=q&&!1!==q){k=B(m,k);break a}m=l(w);A++}k=null}break;case "fn":k=lb(d,c);break;case "loop":var t,k=d,f=c,A=p(l(k)),k=l(l(k)),f=Ba(f),
w=null;if(0!==T(A)%2)throw Error("loop requires an even number of bindings");q=Z(A);var u=[];for(m=0;m<q.length;m+=2)A=q[m],t=q[m+1],u.push(A),ja(f,A),t=B(t,f),ja(f,A,t);for(;;)try{for(var v=p(k),y=l(k);null!=v;)w=B(v,f),v=p(y),y=l(y);break}catch(ra){if(ra instanceof nb){if(u.length!==ra.args.length)throw Error(h("Wrong number or arguments, expected: ",u.length," got: ",ra.args.length));for(m=0;m<u.length;m++)e(f,u[m],ra.args[m])}else throw ra;}k=w;break;case "recur":k=Ib(d,c);break;case "throw":throw B(l(d),
c);case "new":k=Jb(d,c);break;case ".":k=Kb(d,c);break;case "defmacro":k=mb(d,c);break;default:k=Db(d,c)}}else throw Error(h('invalid form: "',d,'"'));}return k}function rb(a,b){return a.namespace()?h('zera.core.keyword("',a.namespace(),'", "',a.name(),'")'):h('zera.core.keyword("',a.name(),'")')}function Qa(a){return a.split("").map(function(a){return sb[a]?sb[a]:a}).join("")}function Ra(a,b){var c=a.namespace(),g=a.name();if(c&&c.startsWith("js")||!c&&Ca(b,g))return h(Qa(g));c||(c=ka.get().name());
return h("window",".",c,".",Qa(g))}function V(a,b){if(!X(a))throw Error("Malformed quote, expected: (quote value)");var c;c=p(l(a));if(null==c)return"null";if(!0===c)return"true";if(!1===c)return"false";if(S(c))return h(c);if(ha(c))return h('"',c,'"');if(ea(c))return rb(c);if(L(c))return c.namespace()?h('zera.core.symbol("',c.namespace(),'", "',c.name(),'"'):h('zera.core.symbol("',c.name(),'")');if(X(c)){if(ga(c))return h("zera.core.cons(",V(p(c)),", ",V(l(c)),")");c=K(function(a){return V(a,b)},
c);return h("zera.core.list(",c.join(", "),")")}if(na(c))return c=K(function(a){return h(V(a.key(),b),", ",V(a.val(),b))},c),h("zera.core.arrayMap(",c.join(", "),")");if(wa(c))return c=K(function(a){return V(a,b)},c),h("zera.core.set([",c.join(", "),"])");if(qa(c))return c=K(function(a){return V(a,b)},c),h("zera.core.vector(",c.join(", "),")");if(R(c))return c=K(function(a){return E(a,b)},c),h("[",c.join(", "),"]");throw Error(h("Don't know how to quote: ",r(c)));}function Ob(a,b){var c=K(function(a){return h(E(a.key(),
b),", ",E(a.val(),b))},a);return h("zera.core.arrayMap(",c.join(", "),")")}function Pb(a,b){var c=K(function(a){return E(a,b)},a);return h("zera.core.vector(",c.join(", "),")")}function Qb(a,b){var c=K(function(a){return E(a,b)},a);return h("[",c.join(", "),"]")}function Rb(a,b){var c=K(function(a){return E(a,b)},a);return h("zera.core.set([",c.join(", "),"])")}function Sb(a,b){var c,g=["(function(){"];c=za(jb(l(a)));if(1===T(c)%2)throw Error("The number of conditions should be even");var d=K(function(a){var c=
p(a);a=l(a);return ea(c)&&v.intern("else").equals(c)?["true",E(a,b)]:[E(c,b),E(a,b)]},c);for(c=0;c<d.length;c++)g.push("if ("),g.push(d[c][0]),g.push(") { return "),g.push(d[c][1]),g.push("; } ");g.push("}())");return g.join("")}function Tb(a,b){var c=["(function(){"],g=l(a),g=K(function(a){return E(a,b)},g);g[g.length-1]=h("return ",g[g.length-1],";");c.push(g.join("; "));c.push("}())");return c.join("")}function Ub(a,b){var c,g=["(function("];c=l(a);var d=p(c),e=l(c),f,m=[];for(c=0;c<T(d);c+=2){f=
xa(d,c);if(!L(f))throw Error("Invalid binding name");m.push(f.name());ja(b,f,!0)}g.push(m.join(", "));g.push("){");d=K(function(a){return E(a,b)},e);d[d.length-1]=h("return ",d[d.length-1],";");g.push(d.join("; "));g.push("})");return g.join("")}function Vb(a,b){var c,g=["(function("];c=l(a);var d=p(c),e=l(c),f=[];for(c=0;c<T(d);c+=2){if(!L(d[c]))throw Error("Invalid binding name");f.push(d[c].name());ja(b,d[c],!0)}g.push(f.join(", "));g.push("){");c=K(function(a){return E(a,b)},e);c[c.length-1]=
h("return ",c[c.length-1],";");g.push(c.join("; "));g.push("}(");e=[];for(c=0;c<T(d);c+=2)e.push(E(d[c+1]));g.push(e.join(", "));g.push("))");return g.join("")}function Wb(a,b){var c=p(l(a)),g=l(l(a));return h("new ",E(c,b),"(",K(function(a){return E(a,b)},g).join(", "),")")}function Xb(a,b){var c=p(a),g=l(a);return h(E(c,b),".get().apply(null, [",K(function(a){return E(a,b)},g).join(", "),"])")}function E(a,b){for(var c=b||pb,g=!0,d=null,e=Da(a);g;)if(g=!1,null==e||qb.equals(e))d="null";else if(!0===
e)d="true";else if(!1===e)d="false";else if(S(e))d=h(e);else if(ha(e))d=h('"',e,'"');else if(ea(e))d=rb(e);else if(na(e))d=Ob(e,c);else if(qa(e))d=Pb(e,c);else if(R(e))d=Qb(e,c);else if(wa(e))d=Rb(e,c);else if(L(e))d=Ra(e,c);else if(X(e)){if(e.isEmpty())return e;switch(h(p(e))){case "quote":d=V(e);break;case "do":d=Tb(e,c);break;case "let":d=Vb(e,c);break;case "def":var d=e,f=p(l(d)),m=p(l(l(d)));if(!L(f))throw Error("definition name must be a symbol");var q=ka.get().name();if(f.namespace())throw Error("Cannot intern qualified symbol");
d=Ra(f);q=I(n.intern("quote"),q);f=I(n.intern("quote"),f);d=null==m?h(d," = zera.lang.Var.intern(",V(q),", ",V(f),")"):h(d," = zera.lang.Var.intern(",V(q),", ",V(f),", ",E(m),")");break;case "var":throw Error("TODO");case "set!":m=e;d=c;f=p(l(m));m=p(l(l(m)));if(null==f||null==m)throw Error("Malformed assignment expecting: (set! target value)");if(!L(f))throw Error("Invalid assignment target");d=!f.namespace()&&Ca(d,f)?h(Qa(f.name())," = ",E(m)):h(Ra(f),".set(",E(m),")");break;case "cond":d=Sb(e,
c);break;case "fn":d=Ub(e,c);break;case "loop":throw Error("TODO");case "recur":throw Error("TODO");case "throw":d=c;f=p(l(e));d=h("throw ",E(f,d));break;case "new":d=Wb(e,c);break;case ".":throw Error("Incomplete");case "defmacro":mb(e,c);break;default:d=Xb(e,c)}}else throw Error(h('invalid form: "',e,'"'));return d}function tb(a){return"[object Object]"===Object.prototype.toString.call(a)}function K(a,b){if(U(b))return[];var c=R(b)?b:Z(b),d=[],e;for(e=0;e<c.length;e++)d.push(ca(a,I(c[e])));return d}
function da(a){var b;if(ha(a))return a.startsWith(":")?v.intern(a.substring(1)):a.startsWith("'")?I(Yb,n.intern(a.substring(1))):a.startsWith('"')&&a.endsWith('"')?a.substring(1).substring(0,a.length-2):n.intern(a);if(R(a)){if(0===a.length)return q.EMPTY;if(1===a.length)return G(da(a[0]),q.EMPTY);var c=null,d=null;for(b=a.length-1;0<=b;b--){if("&"===a[b]){if(2===a.length)return G(q.EMPTY,da(d));b--;d=G(da(a[b]),d);if(3===a.length)return d;c=za(l(za(c)))}else d=da(a[b]);c=G(d,c)}return c}if(z(a))return a;
if(tb(a)){c=Object.getOwnPropertyNames(a);if(0===c.length)return u.EMPTY;d=[];for(b=0;b<c.length;b++)d.push(n.intern(c[b])),d.push(da(a[c[b]]));return new u(null,d)}return a}function Sa(a){return da(JSON.parse(a))}function ub(a){return B(da(a))}function Ta(a){return function(b){try{var c=eval(b);null!=c&&e(a,b,c)}catch(g){}}}function aa(a){this.limit=a.length-1;this.stream=a.split("");this.position=0;this._column=this._line=1}function Ea(a,b,c,d){for(var g=b.line(),e=[];;){for(var f=b.read();Fa(f);)f=
b.read();if(null===f)throw Error("EOF while reading, starting at line: "+g);if(f===a)break;var h=vb(f);null!==h?f=h.call(null,b,f,d):(b.unread(f),f=Ga(b,!0,null,c,d));f!==b&&e.push(f)}return e}function Ua(a,b,c){throw Error("Unmatched delimiter: "+b);}function wb(a,b,c){var d=a.line(),e=a.column();b=sa(a,!0,null,!0,c);if(L(b)||ha(b))b=N(Zb,b);else if(ea(b))b=N(b,!0);else if(!na(b))throw Error("Metadata must be a Symbol, Keyword, String or Map");a=sa(a,!0,null,!0,c);if(f(a,t)){la(a)&&(b=b.assoc([$b,
d,ac,e]));if(f(a,C))return a.resetMeta(b),a;c=a.meta();for(b=b.entries();null!==b;b=b.next())d=b.first(),c=c.assoc([bb(d),cb(d)]);return a.withMeta(c)}throw Error("Metadata can only be applied to IMetas");}function xb(a){return function(b,c,d){b=sa(b,!0,null,!0,d);return I(a,b)}}function Fa(a){return null==a?!1:","===a||a.match(/^\s$/)}function vb(a){a=Va[a];return null!=a?a:null}function Wa(a){a=new aa(a);for(var b,c;;)if(b=Ga(a,{eofIsError:!1,eofValue:null}),null!=b&&(c=b),null==b)return c}function yb(a,
b){for(var c=[b];;){var d=a.read();if(null===d||Fa(d)||Va[d]){a.unread(d);break}c.push(d)}c=c.join("");d=null!==c.match(/(\-|\+)?\d+/)?1*c:null;if(null===d)throw Error("Invalid number: "+c);return d}function zb(a,b,c){if(c&&("@"===b||"`"===b||"~"===b))throw Error("Invalid leading character: "+b);for(b=[b];;){c=a.read();if(null===c||Fa(c)||"#"!==c&&"'"!==c&&Va[c])return a.unread(c),b.join("");if("@"===c||"`"===c||"~"===c)throw Error("Invalid constituent character: "+c);b.push(c)}}function bc(a){if("nil"===
a)return null;if("true"===a)return!0;if("false"===a)return!1;var b;b=":"===a.charAt(0)?v.intern(n.intern(a.substring(1))):n.intern(a);if(null!==b)return b;throw Error("Invalid token: "+a);}function Ga(a,b){var c=!0,d=null;null!=b&&(c=b.eofIsError,d=b.eofValue);return sa(a,c,d,!1,b)}function sa(a,b,c,d,e){for(;;){for(d=a.read();Fa(d);)d=a.read();if(null===d){if(b)throw Error("EOF while reading");return c}if(d.match(/^\d$/))return yb(a,d);var g=vb(d);if(null!==g){d=g.call(null,a,d,e);if(d===a)continue;
return d}if("+"===d||"-"===d){b=a.read();if(b.match(/^\d$/))return a.unread(b),yb(a,d);a.unread(b)}a=zb(a,d,!0);return bc(a)}}function Ab(a){a=new aa(a);for(var b,c;;)if(b=Ga(a,{eofIsError:!1,eofValue:null}),null!=b&&(c=B(b)),null==b)return c}var Bb="undefined"!==typeof module&&"undefined"!==typeof module.exports,cc="undefined"!==typeof window;t.$zera$isProtocol=!0;t.$zera$tag="zera.lang.IMeta";t.prototype.meta=function(){throw Error("unimplemented");};m.$zera$isProtocol=!0;m.$zera$tag="zera.lang.IObj";
m.$zera$protocols={"zera.lang.IMeta":t};m.prototype=Object.create(t.prototype);m.prototype.withMeta=function(a){throw Error("unimplemented");};C.$zera$tag="zera.lang.AReference";C.$zera$isProtocol=!0;C.prototype=Object.create(t.prototype);C.prototype.meta=function(){return this.$zera$meta};C.prototype.alterMeta=function(a,b){return this.$zera$meta=ca(a,G(this.$zera$meta,b))};C.prototype.resetMeta=function(a){return this.$zera$meta=a};D.prototype=Object.create(C.prototype);F.$zera$tag="zera.lang.Named";
F.$zera$isProtocol=!0;F.prototype.name=function(){throw Error("unimplemented");};F.prototype.namespace=function(){throw Error("unimplemented");};n.$zera$tag="zera.lang.Symbol";n.prototype=Object.create(F.prototype);n.intern=function(a){if(null==a)throw Error("Symbol reprentation cannot be nil");var b=a.indexOf("/");return-1===b||"/"===a?new n(null,a):new n(a.substring(0,b),a.substring(b+1))};n.prototype.name=function(){return this.$zera$name};n.prototype.namespace=function(){return this.$zera$ns};
n.prototype.toString=function(){return null==this.$zera$ns?this.$zera$name:h(this.$zera$ns,"/",this.$zera$name)};n.prototype.isQualified=function(){return!!this.$zera$ns};n.prototype.withMeta=function(a){return new n(this.$zera$ns,this.$zera$name,a)};n.prototype.meta=function(){return this.$zera$meta};n.prototype.apply=function(a,b){if(1!=b.length)throw Error("Symbols expect one and only one argument");if(z(b[0].apply))return b[0].apply(null,[this]);throw Error("Symbols expect and argument this is invokable");
};n.prototype.equals=function(a){return null!=a&&L(a)?this.$zera$ns===a.$zera$ns&&this.$zera$name===a.$zera$name:!1};var qb=n.intern("nil");n.intern("true");n.intern("false");var Yb=n.intern("quote");n.intern("def");n.intern("set!");var Eb=n.intern("fn");n.intern("cond");n.intern("loop");n.intern("recur");n.intern("throw");var Hb=n.intern("new"),Gb=n.intern(".");n.intern("defmacro");n.intern("&");var Fb={nil:!0,"true":!0,"false":!0,quote:!0,def:!0,"set!":!0,fn:!0,cond:!0,loop:!0,recur:!0,"throw":!0,
"new":!0,".":!0,defmacro:!0,"var":!0,"do":!0,let:!0};v.$zera$tag="zera.lang.Keyword";v.prototype=Object.create(F.prototype);v.table={};v.intern=function(a){a=L(a)?a:n.intern(a);var b=v.table[a];b||(b=v.table[a]=new v(a));return b};v.prototype.name=function(){return this.$zera$sym.name()};v.prototype.namespace=function(){return this.$zera$sym.namespace()};v.prototype.toString=function(){return h(":",this.$zera$sym)};v.prototype.equals=function(a){return null!=a&&ea(a)?this.namespace()===a.namespace()&&
this.name()===a.name():!1};W.prototype=Object.create(m.prototype);ua.prototype=Object.create(W.prototype);q.$zera$tag="zera.lang.Cons";q.prototype=Object.create(W.prototype);q.EMPTY=new q(null,null,null);q.prototype.meta=function(){return null==this.$zera$meta?N():this.$zera$meta};q.prototype.withMeta=function(a){return new q(a,this.$zera$car,this.$zera$cdr)};q.prototype.first=function(){return this.$zera$car};q.prototype.rest=function(){return this.$zera$cdr};q.prototype.count=function(){return this.$zera$count};
q.prototype.next=function(){var a=this.rest();return U(a)?null:a};q.prototype.cons=function(a){return new q(this.$zera$meta,a,this)};q.prototype.conj=function(a){var b,c=this;for(b=0;b<a.length;b++)c=c.cons(a[b]);return c};q.prototype.isEmpty=function(){return 0===this.$zera$count};q.prototype.isList=function(){return!0};q.prototype.equals=function(a){if(null==a)return!1;if(X(a)){var b=this.first(),c=a.first(),d=this.rest();for(a=a.rest();!U(d)&&!U(a);){if(b!==c)return!1;b=d.first();c=a.first();d=
d.rest();a=a.rest()}return!0}return!1};Q.prototype=Object.create(W.prototype);Q.prototype.sval=function(){null!=this.fn&&(this._sv=ca(this.fn),this.fn=null);return null!=this._sv?this._sv:this._seq};Q.prototype.seq=function(){this.sval();if(null!=this._sv){var a=this._sv;for(this._sv=null;a instanceof Q;)a=a.sval();this._seq=a}return this._seq};Q.prototype.count=function(){var a=0,b;for(b=this;null!=b;b=b.next())a++;return a};Q.prototype.cons=function(a){return G(a,this.seq())};Q.prototype.first=
function(){this.seq();return null==this._seq?null:this._seq.first()};Q.prototype.next=function(){this.seq();return null==this._seq?null:this._seq.next()};Q.prototype.rest=function(){var a=this.next();return null==a?q.EMPTY:a};Q.prototype.toString=function(){for(var a=[],b=this,c;b.next();)c=b.first(),b=b.next(),a.push(r(c));return"("+a.join(" ")+")"};O.prototype.key=function(){return this.$zera$key};O.prototype.val=function(){return this.$zera$val};O.prototype.first=O.prototype.key;O.prototype.next=
O.prototype.val;O.prototype.rest=function(){return I(this.val())};O.prototype.toString=function(){return h("[",r(this.key())," ",r(this.val()),"]")};ia.prototype=Object.create(W.prototype);u.$zera$tag="zera.lang.ArrayMap";u.prototype=Object.create(ia.prototype);u.EMPTY=new u(null,[]);u.createFromEntries=function(a){var b,c,d=[];for(b=0;b<a.length;b++)if(c=a[b],c instanceof O)d.push(c.key()),d.push(c.val());else if(R(c)&&2===c.length)d.push(c[b]),d.push(c[b+1]);else throw Error("Invalid map entry");
return new u(null,d)};u.prototype.count=function(){return this.$zera$array.length/2};u.prototype.meta=function(){return null==this.$zera$meta?N():this.$zera$meta};u.prototype.withMeta=function(a){return new u(a,this.$zera$array)};u.prototype.toString=function(){var a=[],b,c=this.$zera$array;for(b=0;b<c.length;b+=2)a.push(h(r(c[b])," ",r(c[b+1])));return h("{",a.join(", "),"}")};u.prototype.first=function(){return new O(this.$zera$array[0],this.$zera$array[1])};u.prototype.next=function(){return l(this.entries())};
u.prototype.rest=function(){var a=this.entries();return 0===T(a)?q.EMPTY:l(this.entries())};u.prototype.conj=function(a){var b,c;c=this.$zera$array;var d=[];for(b=0;b<c.length;b++)d.push(c[b]);for(b=0;b<a.length;b++){c=a[b];if(!(c instanceof O))if(R(c)&&2==c.length)c=new O(c[0],c[1]);else throw Error(h("Don't know how to coerce '",r(c),"' into a zera.MapEntry"));d.push(c.key());d.push(c.val())}return new u(this.meta(),d)};u.prototype.entries=function(){var a=this.$zera$array,b,c=[];for(b=0;b<a.length;b+=
2)c.push(new O(a[b],a[b+1]));return I.apply(null,c)};u.prototype.keys=function(){var a=this.$zera$array,b,c=[];for(b=0;b<a.length;b+=2)c.push(a[b]);return I.apply(null,c)};u.prototype.vals=function(){var a=this.$zera$array,b,c=[];for(b=0;b<a.length;b+=2)c.push(a[b+1]);return I.apply(null,c)};u.prototype.find=function(a){var b,c=this.$zera$array;for(b=0;b<c.length;b+=2)if(pa(c[b],a))return a=c[b+1]};u.prototype.apply=function(a,b){return this.find(b[0])};u.prototype.assoc=function(a){var b;if(0!==
a.length%2)throw Error("key value pairs must be even to assoc");var c=Array.prototype.slice.call(this.$zera$array);for(b=0;b<a.length;b+=2)c.push(a[b]),c.push(a[b+1]);return new u(null,c)};u.prototype.dissoc=function(a){var b,c=[],d=this.$zera$array;for(b=0;b<d.length;b+=2)pa(d[b],a)||(c.push(d[b]),c.push(d[b+1]));return new u(this.meta(),c)};u.prototype.containsKey=function(a){var b,c=this.$zera$array;for(b=0;b<c.length;b+=2)if(pa(c[b],a))return!0;return!1};oa.prototype=Object.create(W.prototype);
M.prototype=Object.create(oa.prototype);M.prototype.toString=function(){return h("#{",this.toArray().join(" "),"}")};M.prototype.toArray=function(){return Z(this.seq())};M.prototype.get=function(a){return this.$zera$rep.find(a)};M.prototype.count=function(){return this.$zera$rep.count()};M.prototype.seq=function(){return this.$zera$rep.keys()};M.prototype.apply=function(a,b){return this.get(b[0])};M.prototype.equals=function(a){return a instanceof oa&&this.$zera$rep.equals(a.$zera$rep)};M.prototype.contains=
function(a){return this.$zera$rep.containsKey(a)};M.prototype.meta=function(){return null==this.$zera$meta?N():this.$zera$meta};M.prototype.first=function(){return this.seq().first()};M.prototype.rest=function(){return this.seq().rest()};M.prototype.next=function(){return this.seq().next()};J.createFromArray=function(a){var b,c=[];for(b=0;b<a.length;b++)c.push(a[b]),c.push(a[b]);return new J(null,new u(null,c))};J.prototype=Object.create(M.prototype);J.EMPTY=new J(null,u.EMPTY);J.prototype.conj=function(a){var b,
c=[];for(b=0;b<a.length;b++)c.push([a[b],a[b]]);return new J(this.meta(),this.$zera$rep.conj(c))};J.prototype.withMeta=function(a){return new J(this.meta(),this.$zera$rep)};J.prototype.disjoin=function(a){return this.contains(a)?new J(this.meta(),this.$zera$rep.dissoc(a)):this};J.prototype.cons=function(a){return this.contains(a)?this:new J(this.meta(),this.$zera$rep.assoc(a))};var qa=R,P=console.log.bind();H.prototype=Object.create(D.prototype);H.intern=function(a,b,c){a=(Oa(a)?a:y.findOrCreate(a)).intern(b);
c&&a.set(c);return a};H.prototype.get=function(){return this.$zera$value};H.prototype.resetMeta=function(a){P(h("resetting meta on var to",": ",r(a)));a=D.prototype.resetMeta.call(this,a);P(h("var meta",": ",r(this.$zera$meta)));return a};H.prototype.meta=function(){return this.$zera$meta};H.prototype.set=function(a){if(null==this.$zera$value||this.isDynamic())return this.$zera$value=a;throw Error("Can't set Var value once it has been set");};H.prototype.setDynamic=function(){this.$zera$meta=this.$zera$meta.assoc([v.intern("dynamic"),
!0]);return this};H.prototype.isDynamic=function(){return!!this.$zera$meta.find(v.intern("dynamic"))};H.prototype.setMacro=function(){this.$zera$meta=this.$zera$meta.assoc([v.intern("macro"),!0]);return this};H.prototype.isMacro=function(){return!!this.$zera$meta.find(v.intern("macro"))};H.prototype.toString=function(){return h("#'",this.$zera$ns.name(),"/",this.$zera$name)};y.namespaces={};y.all=function(){return I.apply(null,Object.values(y.namespaces))};y.findOrCreate=function(a){var b=y.namespaces[a];
null==b&&(b=new y(a),y.namespaces[a]=b);return b};y.findOrDie=function(a){var b=y.namespaces[a];if(null!=b)return b;throw Error(h("Can't find the namespace: ",a));};y.prototype.name=function(){return this.$zera$name};y.prototype.mappings=function(){return this.$zera$mappings};y.prototype.mapping=function(a){return this.$zera$mappings[a]};y.prototype.intern=function(a){if(!L(a))throw Error("Namespace can only intern symbols");if(null!=a.namespace())throw Error("Cannot intern namespace-qualified symbol");
var b=new H(null,this,a);return this.$zera$mappings[a]=b};y.prototype.toString=function(){return h("#<Namespace name: ",this.$zera$name,">")};var d=y.findOrCreate(n.intern("zera.core")),ka=H.intern(d,n.intern("*ns*"),d).setDynamic(),Nb=ob,pb=Ba(),sb={"+":"__PLUS__","-":"__MINUS__","!":"__BANG__","?":"__QEST__","*":"__STAR__",">":"__GT__","<":"__LT__","=":"__EQ__"};e(d,"zera.lang.IMeta",t);e(d,"zera.lang.IObj",m);e(d,"zera.lang.AReference",C);e(d,"zera.lang.ARef",D);e(d,"zera.lang.Named",F);e(d,"zera.lang.Symbol",
n);e(d,"zera.lang.Keyword",v);e(d,"zera.lang.Seq",W);e(d,"zera.lang.List",ua);e(d,"zera.lang.Cons",q);e(d,"zera.lang.LazySeq",Q);e(d,"zera.lang.MapEntry",O);e(d,"zera.lang.AMap",ia);e(d,"zera.lang.ArrayMap",u);e(d,"zera.lang.ASet",oa);e(d,"zera.lang.APersistentSet",M);e(d,"zera.lang.HashSet",J);e(d,"zera.lang.Var",H);e(d,"zera.lang.Namespace",y);e(d,"isa?",f);e(d,"var?",Na);e(d,"var-get",function(a){if(Na(a))return a.get();throw Error("var-get can only be used on Vars");});e(d,"var-set",function(a,
b){if(Na(a))return a.set(b);throw Error("var-set can only be used on Vars");});e(d,"the-ns",Aa);e(d,"ns-name",function(a){return Aa(a).name()});e(d,"create-ns",function(a){return new y(a)});e(d,"find-ns",function(a){return y.namespaces[a]});e(d,"ns-map",function(a){a=Aa(a);return kb(a.mappings())});e(d,"namespace?",Oa);e(d,"meta",function(a){if(null==a)return null;if(z(a.meta))return a.meta();throw Error("Don't now how to get metadata from: "+a);});e(d,"with-meta",function(a,b){if(null==a)return null;
if(z(a.withMeta))return a.withMeta(b);throw Error("Don't now how to add metadata to: "+a);});e(d,"alter-meta",function(a,b,c){if(null==a)return null;if(z(a.alterMeta))return a.alterMeta(b,c);throw Error("Don't now how to add alter metadata for: "+a);});e(d,"reset-meta",function(a,b){if(null==a)return null;if(z(a.resetMeta))return a.resetMeta(b);throw Error("Don't now how to reset metadata for: "+a);});e(d,"compile",E);e(d,"eval",B);e(d,"read-string",Wa);e(d,"apply",ca);e(d,"macroexpand",Da);e(d,"nil?",
function(a){return null==a});e(d,"empty?",U);e(d,"list",I);e(d,"array-map",N);e(d,"array-map?",function(a){return a instanceof u});e(d,"map?",na);e(d,"entries",function(a){if(z(a.entries))return a.entries();throw Error(h("Don't know how to get the entries of: ",r(a)));});e(d,"get",function(a,b,c){if(z(a.find))return a=a.find(b),null==c?a?a:null:a?a:c;throw Error(h("Don't know how to get value by key from: ",r(a)));});e(d,"assoc",function(a){var b=Array.prototype.slice.call(arguments,1);if(z(a.assoc))return a.assoc(b);
throw Error(h("Don't know how to assoc: ",r(a)));});e(d,"keys",function(a){if(z(a.keys))return a.keys();throw Error(h("Don't know how to get keys from: ",r(a)));});e(d,"vals",function(a){if(z(a.vals))return a.vals();throw Error(h("Don't know how to get vals from: ",r(a)));});e(d,"key",bb);e(d,"val",cb);e(d,"set",function(a){if(null==a)return J.EMPTY;if(fa(a))return J.createFromArray(a);var b=a.first();a=a.rest();for(var c=[];a.next();)c.push(b),a=a.rest(),b=a.first();return J.createFromArray(c)});
e(d,"set?",wa);e(d,"list?",function(a){return f(a,ua)});e(d,"lazy-seq?",function(a){return a instanceof Q});e(d,"lazy-seq",va);e(d,"seq",Ha);e(d,"seq?",la);e(d,"seqable?",Za);e(d,"cons",G);e(d,"count",T);e(d,"car",p);e(d,"cdr",l);e(d,"map",ya);e(d,"into",Pa);e(d,"reduce",db);e(d,"filter",eb);e(d,"take",$a);e(d,"range",ab);e(d,"first",ba);e(d,"rest",ma);e(d,"next",function(a){if(null==a)return null;if(z(a.next))return a.next();if(fa(a))return 0===a.length?null:Array.prototype.slice.call(a,1);throw Error(h("Don't know how to get the next element of: ",
r(a)));});e(d,"conj",Ja);e(d,"cons?",X);e(d,"pair?",ga);e(d,"pair",jb);e(d,"pr-str",r);e(d,"prn-str",r);e(d,"pr",La);e(d,"prn",La);e(d,"println",P);e(d,"say",P);e(d,"str",h);e(d,"boolean?",Ka);e(d,"string?",ha);e(d,"symbol?",L);e(d,"symbol",Y);e(d,"keyword",Ya);e(d,"keyword?",ea);e(d,"name",function(a){if(f(a,F))return a.name();throw Error(h("Don't know how to get the name of: ",r(a)));});e(d,"namespace",function(a){if(f(a,F))return a.namespace();throw Error(h("Don't know how to get the namespace of: ",
r(a)));});e(d,"number?",S);e(d,"even?",function(a){return 0===a%2});e(d,"odd?",function(a){return 1===a%2});e(d,"num",Ma);e(d,"is",fb);e(d,"ok",gb);e(d,"cons->array",Z);e(d,"array->cons",Ia);e(d,"array?",R);e(d,"aset",function(a,b,c){null!=a&&(a[b]=c);return a});e(d,"aget",function(a,b){return null==a?null:a[b]});e(d,"alength",function(a){return a.length});e(d,"int-array",function(a){if(S(a))return new Int32Array(a);if(la(a))return new Int32Array(Z(a))});e(d,"float-array",function(a){if(S(a))return new Float32Array(a);
if(la(a))return new Float32Array(Z(a))});e(d,"array",function(){return Array.prototype.slice.call(arguments)});e(d,"object->map",kb);e(d,"object?",tb);e(d,"read-js",da);e(d,"read-json",Sa);e(d,"identical?",function(a,b){return a===b});e(d,"equiv?",function(a,b){return a==b});e(d,"=",pa);e(d,"assert",function(a){if(null==a||!1===a)throw Error(h("Assert failed: ",r(a)));return null});e(d,"not",function(a){return!a});e(d,"bit-not",function(a){return~a});e(d,"bit-and",function(a,b){return a&b});e(d,"bit-or",
function(a,b){return a||b});e(d,"bit-shift-left",function(a,b){return a<<b});e(d,"bit-shift-right",function(a,b){return a>>b});e(d,"unsigned-bit-shift-right",function(a,b){return a>>>b});e(d,"<",function(a,b){if(0===arguments.length)throw Error(h("Wrong number of arguments expected 1 or more, got: ",arguments.length));if(1===arguments.length)return!0;if(2===arguments.length)return a<b;if(a<b){var c,d,e=b,f=Array.prototype.slice.call(arguments,2);for(c=0;c<f.length;c++)d=e<f[c],e=f[c],f=f.slice(1);
return d}return!1});e(d,"<=",function(a,b){if(0===arguments.length)throw Error(h("Wrong number of arguments expected 1 or more, got: ",arguments.length));if(1===arguments.length)return!0;if(2===arguments.length)return a<=b;if(a<=b){var c,d,e=b,f=Array.prototype.slice.call(arguments,2);for(c=0;c<f.length;c++)d=e<=f[c],e=f[c],f=f.slice(1);return d}return!1});e(d,">",function(a,b){if(0===arguments.length)throw Error(h("Wrong number of arguments expected 1 or more, got: ",arguments.length));if(1===arguments.length)return!0;
if(2===arguments.length)return a>b;if(a>b){var c,d,e=b,f=Array.prototype.slice.call(arguments,2);for(c=0;c<f.length;c++)d=e>f[c],e=f[c],f=f.slice(1);return d}return!1});e(d,">=",function(a,b){if(0===arguments.length)throw Error(h("Wrong number of arguments expected 1 or more, got: ",arguments.length));if(1===arguments.length)return!0;if(2===arguments.length)return a>=b;if(a>=b){var c,d,e=b,f=Array.prototype.slice.call(arguments,2);for(c=0;c<f.length;c++)d=e>=f[c],e=f[c],f=f.slice(1);return d}return!1});
e(d,"+",function(a){if(null==a)return null;if(0===arguments.length)return 0;if(1===arguments.length){if(!S(a))throw Error("Only numbers can be added");return a}var b,c=0;for(b=0;b<arguments.length;b++)c+=1*arguments[b];return c});e(d,"-",function(a){if(0===arguments.length)throw Error(h("Wrong number of arguments expected 1 or more, got: ",arguments.length));if(1===arguments.length){if(!S(a))throw Error("Only numbers can be subtracted");return-a}var b,c=0;for(b=0;b<arguments.length;b++)c-=1*arguments[b];
return c});e(d,"*",function(a){if(null==a)return null;if(0===arguments.length)return 1;if(1===arguments.length){if(!S(a))throw Error("Only numbers can be multiplied");return a}var b=1,c;for(c=0;c<arguments.length;c++)b*=Ma(arguments[c]);return b});e(d,"/",function(a){if(0===arguments.length)throw Error(h("Wrong number of arguments expected 1 or more, got: ",arguments.length));if(1===arguments.length){if(!S(a))throw Error("Only numbers can be multiplied");return 1/a}var b=1,c;for(c=0;c<arguments.length;c++)b/=
Ma(arguments[c]);return b});e(d,"*platform*",v.intern("js"));var dc=y.findOrCreate(n.intern("js"));"Array ArrayBuffer AsyncFunction Atomics Boolean DataView Date Error EvalError Float32Array Float64Array Function Generator GeneratorFunction Infinity Int32Array Int64Array Int8Array InternalError Intl JSON Map Math NaN Number Object Promise Proxy RangeError ReferenceError Reflect RegExp Set String Symbol SyntaxError TypeError TypedArray URIError Uint16Array Uint32Array Uint8Array Uint8ClampedArray WeakMap WeakSet decodeURI decodeURIComponent encodeURI encodeURIComponent eval isFinite isNaN parseFloat parseInt uneval SIMD WebAssembly window document navigator location localStorage console setInterval setTimeout clearInterval clearTimeout".split(" ").forEach(Ta(dc));
if(cc){var ec=y.findOrCreate(n.intern("js.dom"));e(d,"*platform*",v.intern("js/browser"));e(d,"*platform-info*",N(v.intern("platform/name"),navigator.userAgent,v.intern("platform/version"),navigator.userAgent));"Attr ByteString CDATASection CharacterData ChildNode CSSPrimitiveValue CSSValue CSSValueList Comment CustomEvent Document DocumentFragment DocumentType DOMError DOMException DOMImplmentation DOMString DOMTimeStamp DOMStringList DOMTokenList Element Event EventTarget MutationObserver MutationRecord Node NodeFilter NodeIterator NodeList ParentNode ProcessingInstruction Range Text TreeWalker URL Window Worker XMLDocument HTMLAnchorElement HTMLAreaElement HTMLAudioElement HTMLBaseElement HTMLBodyElement HTMLBREElement HTMLButtonElement HTMLCanvasElement HTMLDataElement HTMLDataListElement HTMLDialogElement HTMLDivElement HTMLDListElement HTMLEmbedElement HTMLFieldSetElement HTMLFontElement HTMLFormElement HTMLFrameSetElement HTMLHeadElement HTMLHtmlElement HTMLHRElement HTMLIFrameElement HTMLImageElement HTMLInputElement HTMLKeygenElement HTMLLabelElement HTMLLIElement HTMLLinkElement HTMLMapElement HTMLMediaElement HTMLMetaElement HTMLMeterElement HTMLModElement HTMLObjectElement HTMLOListElement HTMLOptGroupElement HTMLOptionElement HTMLOutputElement HTMLParagraphElement HTMLParamElement HTMLPreElement HTMLProgressElement HTMLQuoteElement HTMLScriptElement HTMLSelectElement HTMLSourceElement HTMLSpanElement HTMLStyleElement HTMLTableElement HTMLTableCaptionElement HTMLTableCellElement HTMLTableDataCellElement HTMLTableHeaderCellElement HTMLTableColElement HTMLTableRowElement HTMLTableSectionElement HTMLTextAreaElement HTMLTimeElement HTMLTitleElement HTMLTrackElement HTMLUListElement HTMLUnknownElement HTMLVideoElement CanvasRenderingContext2D CanvasGradient CanvasPattern TextMetrics ImageData CanvasPixelArray NotifyAudioAvailableEvent HTMLFormControlsCollection HTMLOptionsCollection DOMStringMap RadioNodeList MediaError".split(" ").forEach(Ta(ec))}if(Bb){var fc=
y.findOrCreate(n.intern("js.node"));e(d,"*platform*",v.intern("js/node"));e(d,"*platform-info*",N(v.intern("platform/name"),"node",v.intern("platform/version"),process.version));"Buffer __dirname __filename clearImmediate console exports global process setImmediate".split(" ").forEach(Ta(fc))}aa.prototype.line=function(){return this._line};aa.prototype.column=function(){return this._column};aa.prototype.read=function(){if(this.position>this.limit)return null;var a=this.stream[this.position];this.position++;
"\n"===a?(this._column=1,this._line++):this._column++;return a};aa.prototype.skip=function(a){this.position+=a};aa.prototype.reset=function(){this.position=0};aa.prototype.unread=function(a){--this.position;this.stream[this.position]=a};var Zb=v.intern("tag"),$b=v.intern("line"),ac=v.intern("colunm"),gc=n.intern("var"),Va={'"':function(a,b,c){b=[];for(c=a.read();'"'!==c;c=a.read()){if(null===c)throw Error("EOF while reading string");if("\\"===c){c=a.read();if(null===c)throw Error("EOF while reading string");
switch(c){case "t":c="\t";break;case "r":c="\r";break;case "n":c="\n";break;case "\\":break;case '"':break;case "b":c="\b";break;case "f":c="\f";break;case "u":throw Error("Don't know how to read unicode yet");default:throw Error("Unsupported escape character: "+c);}}b.push(c)}return b.join("")},";":function(a,b,c){do b=a.read();while(null!==b&&"\n"!==b&&"\r"!==b);return a},"'":xb(n.intern("quote")),"@":xb(n.intern("deref")),"^":wb,"(":function(a,b,c){a=Ea(")",a,!0,c);return I.apply(null,a)},")":Ua,
"[":function(a,b,c){return Ea("]",a,!0,c)},"]":Ua,"{":function(a,b,c){a=Ea("}",a,!0,c);return N.apply(null,a)},"}":Ua,"\\":function(a,b,c){b=a.read();if(null===b)throw Error("EOF while reading character");a=zb(a,b,!1);if(1===a.length)return a;if("newline"===a)return"\n";if("space"===a)return" ";if("tab"===a)return"\t";if("backspace"===a)return"\b";if("formfeed"===a)return"\f";if("return"===a)return"\r";if(a.startsWith("u"))throw Error("Don't know how to read unicode characters");if(a.startsWith("o"))throw Error("Don't know how to read octal characters");
},"#":function(a,b,c){b=a.read();if(null===b)throw Error("EOF while reading character");var d=hc[b];if(null==d)throw Error("No dispatch macro for: "+b);return d.call(null,a,b,c)}},hc={"^":wb,"'":function(a,b,c){a=sa(a,!0,null,!0,c);return I(gc,a)},"{":function(a,b,c){return J.createFromArray(Ea("}",a,!0,c))}},ta={lang:{IMeta:t,IObj:m,AReference:C,ARef:D,Named:F,Symbol:n,Keyword:v,Seq:W,List:ua,Cons:q,LazySeq:Q,MapEntry:O,AMap:ia,ArrayMap:u,ASet:oa,APersistentSet:M,HashSet:J,Var:H,Namespace:y},reader:{PushBackReader:aa,
readString:Wa},core:{set:ib,keyword:Ya,symbol:Y,list:I,arrayMap:N,isSymbol:L,isString:ha,isKeyword:ea,isMap:na,isSeq:la,str:h,prn:H.intern(Y("zera.core"),Y("prn"),La),prnStr:r,ok:gb,is:fb,equals:pa,eval:B,the__MINUS__ns:H.intern(Y("zera.core"),Y("the-ns"),Aa),__STAR__ns__STAR__:ka},evalJS:ub,evalJSON:function(a){return B(Sa(a))},readJS:da,readJSON:Sa,readString:Wa,evalString:Ab};if(Bb){var Xa=require("fs");ta.evalJSONFile=function(a){var b=null;JSON.parse(Xa.readFileSync(a).toString()).forEach(function(a){b=
ub(a)});return b};ta.evalFile=function(a){return Ab(Xa.readFileSync(a).toString())};ta.compileFile=function(a){a=Xa.readFileSync(a).toString();a=new aa(a);for(var b,c,d=[],e=Ba();b=Ga(a,{eofIsError:!1,eofValue:null}),null!=b&&(c=E(b,e),null!=c&&d.push(c)),null!=b;);return d.join(";\n")};module.exports=ta}return ta}();window.zera.core.__STAR__ns__STAR__.set(window.zera.core.the__MINUS__ns.get().apply(null,[zera.core.symbol("zera.core")]));
window.zera.core.identity=zera.lang.Var.intern(zera.core.symbol("zera.core"),zera.core.symbol("identity"),function(f){return f});window.zera.core.constantly=zera.lang.Var.intern(zera.core.symbol("zera.core"),zera.core.symbol("constantly"),function(f){return function(){return f}});window.zera.core.prn.get().apply(null,[window.zera.core.identity.get().apply(null,[1])]);
